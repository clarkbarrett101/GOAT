
//The gyro class contains the 3 Axis rotation data of the gyro.  For testing purposes the values are placeholders generated by a sine wave

class Gyro {
  constructor() {
    this.testModifier = 0.0;
    this.sensitivity = 10;
    this.x = 0.0;
    this.y = 0.0;
    this.z = 0.0;
    this.lastRotation = [0.0, 0.0, 0.0];
    this.readArray = function () {
      return [this.x, this.y, this.z];
    };

    this.isMoving = function () {
      //TODO: isMoving function
      // this function returns true if the difference between the current rotation and the last rotation that was true has a magnitude greater than the sensitivity level

      //Currently this function returns true if the magnitude of the current rotation is greater than the sensitivity level (as in it only checks if the gyro is off-center)
      let difference = [this.x - this.lastRotation[0], this.y - this.lastRotation[1], this.z - this.lastRotation[2]];
        let magnitude = Math.sqrt(
          difference[0] * difference[0] +
          difference[1] * difference[1] +
          difference[2] * difference[2]
        );

        let result = magnitude > this.sensitivity;
        
        if (result) {
          this.lastRotation = [this.x, this.y, this.z];
        }
      return result;
    };
    this.testRotation = function (x) {
      this.testModifier += x;
      this.x = Math.sin(this.testModifier)/Math.PI*180;
      this.y = Math.sin(this.testModifier * 2)/Math.PI *180;
      this.z = Math.sin(this.testModifier / 3)/Math.PI *180;
    };
  }
}
export {Gyro};
